<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Presupuesto Mensual</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

  <h1 id="tituloPresupuesto"></h1>

  <div class="summary">
    <div>
      <strong>Ingresos:</strong>
      <div id="totalIngresos">$0.00</div>
    </div>
    <div>
      <strong>Egresos:</strong>
      <div id="totalEgresos">$0.00</div>
    </div>
    <div>
      <strong>Disponible:</strong>
      <div id="disponible">$0.00</div>
    </div>
    <div>
      <strong>% Gastos:</strong>
      <div id="porcentajeGastos">0%</div>
    </div>
  </div>

  <h2>Agregar Transacción</h2>

  <div class="form-group">
    <label for="tipo">Tipo de transacción</label>
    <select id="tipo">
      <option value="ingreso">Ingreso</option>
      <option value="egreso">Egreso</option>
    </select>
  </div>

  <div class="form-group">
    <label for="descripcion">Descripción</label>
    <input type="text" id="descripcion" placeholder="Ej. Salario, Supermercado">
  </div>

  <div class="form-group">
    <label for="monto">Monto</label>
    <input type="number" id="monto" placeholder="Ej. 500.00" min="0" step="0.01">
  </div>

  <button onclick="agregarTransaccion()">Agregar</button>

  <div class="tabs">
    <div class="tab-buttons">
      <button onclick="mostrarTab('tabIngresos')">Ingresos</button>
      <button onclick="mostrarTab('tabEgresos')">Egresos</button>
    </div>
    <div id="tabIngresos" class="tab-content active"></div>
    <div id="tabEgresos" class="tab-content"></div>
  </div>

  <script>
    const ingresos = [];
    const egresos = [];

    document.getElementById("tituloPresupuesto").textContent = obtenerTituloPresupuesto();

    function obtenerTituloPresupuesto() {
      const fecha = new Date();
      const meses = ["enero", "febrero", "marzo", "abril", "mayo", "junio", "julio", "agosto", "septiembre", "octubre", "noviembre", "diciembre"];
      return `Presupuesto de ${meses[fecha.getMonth()]} ${fecha.getFullYear()}`;
    }

    function agregarTransaccion() {
      const tipo = document.getElementById("tipo").value;
      const descripcion = document.getElementById("descripcion").value.trim();
      const monto = parseFloat(document.getElementById("monto").value);

      if (!descripcion || isNaN(monto) || monto <= 0) {
        alert("Por favor, ingresa una descripción válida y un monto numérico mayor a 0.");
        return;
      }

      const transaccion = { descripcion, monto: monto.toFixed(2) };

      if (tipo === "ingreso") {
        ingresos.push(transaccion);
      } else {
        egresos.push(transaccion);
      }

      document.getElementById("descripcion").value = "";
      document.getElementById("monto").value = "";

      actualizarResumen();
      actualizarTabs();
    }

    function calcularTotalIngresos() {
      return ingresos.reduce((total, t) => total + parseFloat(t.monto), 0).toFixed(2);
    }

    function calcularTotalEgresos() {
      return egresos.reduce((total, t) => total + parseFloat(t.monto), 0).toFixed(2);
    }

    function calcularDisponible() {
      const ingresosTotales = parseFloat(calcularTotalIngresos());
      const egresosTotales = parseFloat(calcularTotalEgresos());
      return (ingresosTotales - egresosTotales).toFixed(2);
    }

    function calcularPorcentajeGastos() {
      const ingresosTotales = parseFloat(calcularTotalIngresos());
      const egresosTotales = parseFloat(calcularTotalEgresos());
      if (ingresosTotales === 0) return "0%";
      return ((egresosTotales * 100) / ingresosTotales).toFixed(2) + "%";
    }

    function actualizarResumen() {
      document.getElementById("totalIngresos").textContent = `$${calcularTotalIngresos()}`;
      document.getElementById("totalEgresos").textContent = `$${calcularTotalEgresos()}`;
      document.getElementById("disponible").textContent = `$${calcularDisponible()}`;
      document.getElementById("porcentajeGastos").textContent = calcularPorcentajeGastos();
    }

    function actualizarTabs() {
      const tabIngresos = document.getElementById("tabIngresos");
      const tabEgresos = document.getElementById("tabEgresos");
      tabIngresos.innerHTML = "";
      tabEgresos.innerHTML = "";

      const totalIngresos = parseFloat(calcularTotalIngresos());

      ingresos.forEach(t => {
        const div = document.createElement("div");
        div.className = "transaction";
        div.textContent = `${t.descripcion} - $${t.monto}`;
        tabIngresos.appendChild(div);
      });

      egresos.forEach(t => {
        const porcentaje = totalIngresos > 0 ? ((parseFloat(t.monto) * 100) / totalIngresos).toFixed(2) : "0.00";
        const div = document.createElement("div");
        div.className = "transaction";
        div.textContent = `${t.descripcion} - $${t.monto} (${porcentaje}%)`;
        tabEgresos.appendChild(div);
      });
    }

    function mostrarTab(tabId) {
      document.querySelectorAll(".tab-content").forEach(tab => tab.classList.remove("active"));
      document.getElementById(tabId).classList.add("active");
    }
  </script>

</body>
</html>